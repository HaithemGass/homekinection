<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BitCloud Stack API Reference: usart.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">BitCloud Stack API Reference&#160;<span id="projectnumber">1.11.0</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">usart.h</div>  </div>
</div>
<div class="contents">
<a href="usart_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************/</span>
<a name="l00017"></a>00017 <span class="comment">/******************************************************************************</span>
<a name="l00018"></a>00018 <span class="comment"> *   WARNING: CHANGING THIS FILE MAY AFFECT CORE FUNCTIONALITY OF THE STACK.  *</span>
<a name="l00019"></a>00019 <span class="comment"> *   EXPERT USERS SHOULD PROCEED WITH CAUTION.                                *</span>
<a name="l00020"></a>00020 <span class="comment"> ******************************************************************************/</span>
<a name="l00021"></a>00021 <span class="preprocessor">#ifndef _USART_H</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span><span class="preprocessor">#define _USART_H</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span>
<a name="l00024"></a>00024 <span class="comment">/******************************************************************************</span>
<a name="l00025"></a>00025 <span class="comment">                   Includes section</span>
<a name="l00026"></a>00026 <span class="comment">******************************************************************************/</span>
<a name="l00027"></a>00027 <span class="comment">// \cond</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;halUsart.h&gt;</span>
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="comment">/******************************************************************************</span>
<a name="l00031"></a>00031 <span class="comment">                   Define(s) section</span>
<a name="l00032"></a>00032 <span class="comment">******************************************************************************/</span>
<a name="l00033"></a>00033 <span class="preprocessor">#define USART_FLOW_CONTROL_NONE 0</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span><span class="preprocessor">#define USART_FLOW_CONTROL_HARDWARE (1 &lt;&lt; 0)</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span><span class="preprocessor">#define USART_DTR_CONTROL (1 &lt;&lt; 1)</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span>
<a name="l00037"></a>00037 <span class="preprocessor">#if defined(ATMEGA1281) || defined(ATMEGA2561) || defined(ATMEGA1284) || \</span>
<a name="l00038"></a>00038 <span class="preprocessor">    defined(AT90USB1287) || defined(ATMEGA128RFA1) || defined(ATXMEGA128A1) || \</span>
<a name="l00039"></a>00039 <span class="preprocessor">    defined(ATXMEGA256A3) || defined(ATXMEGA256D3)</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span>  <span class="comment">// this define is used only by HAL.</span>
<a name="l00041"></a>00041 <span class="preprocessor">  #define USART_SPI_READ_MODE  (1 &lt;&lt; 4)</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span><span class="preprocessor">  #define USART_SPI_WRITE_MODE (1 &lt;&lt; 3)</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span><span class="comment">// \endcond</span>
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 <span class="comment">/******************************************************************************</span>
<a name="l00047"></a>00047 <span class="comment">                   Types section</span>
<a name="l00048"></a>00048 <span class="comment">******************************************************************************/</span>
<a name="l00050"></a><a class="code" href="struct_h_a_l___usart_descriptor__t.html">00050</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00051"></a>00051 {
<a name="l00054"></a><a class="code" href="struct_h_a_l___usart_descriptor__t.html#a383f6b43732c62e983d89fbd882b18a5">00054</a>   HalUsartService_t <a class="code" href="struct_h_a_l___usart_descriptor__t.html#a383f6b43732c62e983d89fbd882b18a5" title="HAL USART service field - contains variables for HAL USART module internal needs.">service</a>;
<a name="l00057"></a><a class="code" href="struct_h_a_l___usart_descriptor__t.html#a2e4fb251b6c58dada1fb11b010ce3d15">00057</a>   UsartChannel_t <a class="code" href="struct_h_a_l___usart_descriptor__t.html#a2e4fb251b6c58dada1fb11b010ce3d15" title="tty - USART_CHANNEL_n to be used. &quot;n&quot; range depends on the platform. Take a look into halUsart...">tty</a>;
<a name="l00063"></a><a class="code" href="struct_h_a_l___usart_descriptor__t.html#adc0ccd7fb5b322d4a9329fcde7105dc4">00063</a>   UsartMode_t <a class="code" href="struct_h_a_l___usart_descriptor__t.html#adc0ccd7fb5b322d4a9329fcde7105dc4" title="Sets synchronous or asynchronous routine.   Must be chosen from:   USART_MODE_ASYNC   USART_MODE_RS48...">mode</a>;
<a name="l00078"></a><a class="code" href="struct_h_a_l___usart_descriptor__t.html#a4496b8606c0c7a4af2484878665be8b9">00078</a>   UsartBaudRate_t <a class="code" href="struct_h_a_l___usart_descriptor__t.html#a4496b8606c0c7a4af2484878665be8b9" title="baudrate - USART baud rate. Must be chosen from:   USART_BAUDRATE_1200   USART_BAUDRATE_2400   USART_...">baudrate</a>;
<a name="l00084"></a><a class="code" href="struct_h_a_l___usart_descriptor__t.html#afb62418d3548fe8b5bd8f9f73d5da288">00084</a>   UsartData_t <a class="code" href="struct_h_a_l___usart_descriptor__t.html#afb62418d3548fe8b5bd8f9f73d5da288" title="data - USART data length. Must be chosen from:   USART_DATA5   USART_DATA6   USART_DATA7   USART_DATA...">dataLength</a>;
<a name="l00089"></a><a class="code" href="struct_h_a_l___usart_descriptor__t.html#aa3f26b902f71e10f560e098ec994eb7d">00089</a>   UsartParity_t <a class="code" href="struct_h_a_l___usart_descriptor__t.html#aa3f26b902f71e10f560e098ec994eb7d" title="parity - USART parity mode. Must be chosen from:   USART_PARITY_NONE   USART_PARITY_EVEN   USART_PARI...">parity</a>;
<a name="l00093"></a><a class="code" href="struct_h_a_l___usart_descriptor__t.html#aee6aa194ced5586e7d73831ca458d27c">00093</a>   UsartStopBits_t <a class="code" href="struct_h_a_l___usart_descriptor__t.html#aee6aa194ced5586e7d73831ca458d27c" title="stopbits - USART stop bits number. Must be chosen from:   USART_STOPBIT_1   USART_STOPBIT_2  ...">stopbits</a>;
<a name="l00097"></a><a class="code" href="struct_h_a_l___usart_descriptor__t.html#a2628c19a5b39f825dcce8929ddb02533">00097</a>   UsartEdgeMode_t <a class="code" href="struct_h_a_l___usart_descriptor__t.html#a2628c19a5b39f825dcce8929ddb02533" title="edge - data received edge (only for usart). Must be chosen from:   USART_EDGE_MODE_FALLING   USART_ED...">edge</a>;
<a name="l00101"></a><a class="code" href="struct_h_a_l___usart_descriptor__t.html#addcd3b7f53af87947e553c6cf01ddff9">00101</a>   UsartClkMode_t <a class="code" href="struct_h_a_l___usart_descriptor__t.html#addcd3b7f53af87947e553c6cf01ddff9" title="master or slave on usart (only for usart). Must be chosen from: USART_CLK_MODE_MASTER   USART_CLK_MOD...">syncMode</a>;
<a name="l00105"></a><a class="code" href="struct_h_a_l___usart_descriptor__t.html#a223accc4ce6e4a93e567d380d47ef53c">00105</a>   uint8_t *<a class="code" href="struct_h_a_l___usart_descriptor__t.html#a223accc4ce6e4a93e567d380d47ef53c" title="It&#39;s pointer to receive buffer.   If rxBuffer is NULL then transactions are discarded.   Size of buffer depends on user application.">rxBuffer</a>;
<a name="l00107"></a><a class="code" href="struct_h_a_l___usart_descriptor__t.html#a779cead6eec53df79262fb801c7c2b73">00107</a>   uint16_t <a class="code" href="struct_h_a_l___usart_descriptor__t.html#a779cead6eec53df79262fb801c7c2b73" title="length of receive buffer">rxBufferLength</a>;
<a name="l00111"></a><a class="code" href="struct_h_a_l___usart_descriptor__t.html#a0d39d41d35e01f9ac3d4d24a582b250d">00111</a>   uint8_t *<a class="code" href="struct_h_a_l___usart_descriptor__t.html#a0d39d41d35e01f9ac3d4d24a582b250d" title="It&#39;s pointer to transmit buffer.   If txBuffer is NULL then callback method is used.   If txBuffer isn&#39;t NULL then polling method is used.">txBuffer</a>;
<a name="l00113"></a><a class="code" href="struct_h_a_l___usart_descriptor__t.html#a2667515016a555b0b5e0d8568b07aff8">00113</a>   uint16_t <a class="code" href="struct_h_a_l___usart_descriptor__t.html#a2667515016a555b0b5e0d8568b07aff8" title="length of transmit buffer">txBufferLength</a>;
<a name="l00117"></a><a class="code" href="struct_h_a_l___usart_descriptor__t.html#a3d1cdf73896a171b70370962c24a3c3c">00117</a>   void (*rxCallback)(uint16_t);
<a name="l00120"></a><a class="code" href="struct_h_a_l___usart_descriptor__t.html#ac4ba8e9503446dfbaf5d01afa95fc52e">00120</a>   void (*txCallback)(void);
<a name="l00121"></a>00121 <span class="preprocessor">  #if defined(_USE_USART_ERROR_EVENT_)</span>
<a name="l00122"></a>00122 <span class="preprocessor"></span>
<a name="l00128"></a>00128     void (*errCallback)(UsartErrorReason_t);
<a name="l00129"></a>00129 <span class="preprocessor">  #endif</span>
<a name="l00130"></a>00130 <span class="preprocessor"></span>
<a name="l00135"></a><a class="code" href="struct_h_a_l___usart_descriptor__t.html#a24e11c14e1aa878d09f8d5e09ada6958">00135</a>   uint8_t <a class="code" href="struct_h_a_l___usart_descriptor__t.html#a24e11c14e1aa878d09f8d5e09ada6958" title="flow control of usart. One of the defines   USART_FLOW_CONTROL_NONE,   USART_FLOW_CONTROL_HARDWARE, USART_DTR_CONTROL, it is possible to combine by logical OR.   RS485 mode needs for USART_FLOW_CONTROL_NONE.   The RTS pin is driven high when the transmitter is operating.">flowControl</a>;
<a name="l00136"></a>00136 } <a class="code" href="struct_h_a_l___usart_descriptor__t.html" title="Usart descriptor.">HAL_UsartDescriptor_t</a>;
<a name="l00137"></a>00137 
<a name="l00138"></a>00138 <span class="comment">/******************************************************************************</span>
<a name="l00139"></a>00139 <span class="comment">                   Prototypes section</span>
<a name="l00140"></a>00140 <span class="comment">******************************************************************************/</span>
<a name="l00141"></a>00141 <span class="comment">/**************************************************************************/</span>
<a name="l00153"></a>00153 <span class="keywordtype">int</span> <a class="code" href="usart_8h.html#a59024175c26d131adf800e19ac6285b7" title="Registers usart&#39;s event handlers. Performs configuration of usart registers. Performs configuration o...">HAL_OpenUsart</a>(<a class="code" href="struct_h_a_l___usart_descriptor__t.html" title="Usart descriptor.">HAL_UsartDescriptor_t</a> *descriptor);
<a name="l00154"></a>00154 
<a name="l00155"></a>00155 <span class="comment">/*************************************************************************/</span>
<a name="l00165"></a>00165 <span class="keywordtype">int</span> <a class="code" href="usart_8h.html#a9677a5b9bda19ac7e396b18ce89ba67a" title="Releases the usart channel and pins, if hardware flow control was used.">HAL_CloseUsart</a>(<a class="code" href="struct_h_a_l___usart_descriptor__t.html" title="Usart descriptor.">HAL_UsartDescriptor_t</a> *descriptor);
<a name="l00166"></a>00166 
<a name="l00167"></a>00167 <span class="comment">/**************************************************************************/</span>
<a name="l00186"></a>00186 <span class="keywordtype">int</span> <a class="code" href="usart_8h.html#a90edae96f61d2f25020794bbe8c1c024" title="Writes a number of bytes to usart channel. txCallback function will be used to notify when the transm...">HAL_WriteUsart</a>(<a class="code" href="struct_h_a_l___usart_descriptor__t.html" title="Usart descriptor.">HAL_UsartDescriptor_t</a> *descriptor, uint8_t *buffer, uint16_t length);
<a name="l00187"></a>00187 
<a name="l00188"></a>00188 <span class="comment">/*************************************************************************/</span>
<a name="l00204"></a>00204 <span class="keywordtype">int</span> <a class="code" href="usart_8h.html#a8c9727e028dce14b40526dff8b841b4d" title="Reads a number of bytes from usart and places them to the buffer.">HAL_ReadUsart</a>(<a class="code" href="struct_h_a_l___usart_descriptor__t.html" title="Usart descriptor.">HAL_UsartDescriptor_t</a> *descriptor, uint8_t *buffer, uint16_t length);
<a name="l00205"></a>00205 
<a name="l00206"></a>00206 <span class="comment">/**************************************************************************/</span>
<a name="l00217"></a>00217 <span class="keywordtype">int</span> <a class="code" href="usart_8h.html#a8becd54fd65af11b2aad4509cea46e37" title="Forbids the host to transmit data. Only USART_CHANNEL_1 can be used for hardware flow control for avr...">HAL_OnUsartCts</a>(<a class="code" href="struct_h_a_l___usart_descriptor__t.html" title="Usart descriptor.">HAL_UsartDescriptor_t</a> *descriptor);
<a name="l00218"></a>00218 
<a name="l00219"></a>00219 <span class="comment">/**************************************************************************/</span>
<a name="l00230"></a>00230 <span class="keywordtype">int</span> <a class="code" href="usart_8h.html#a7906ead6c8008568357427d56fb52f77" title="Allows the host to transmit data. Only USART_CHANNEL_1 can be used for hardware flow control for avr...">HAL_OffUsartCts</a>(<a class="code" href="struct_h_a_l___usart_descriptor__t.html" title="Usart descriptor.">HAL_UsartDescriptor_t</a> *descriptor);
<a name="l00231"></a>00231 
<a name="l00232"></a>00232 <span class="comment">/**************************************************************************/</span>
<a name="l00244"></a>00244 <span class="keywordtype">int</span> <a class="code" href="usart_8h.html#afb2fc459966b1f270671e328e420de76" title="Reads RTS pin state. Only USART_CHANNEL_1 can be used for hardware flow control for avr...">HAL_ReadUsartRts</a>(<a class="code" href="struct_h_a_l___usart_descriptor__t.html" title="Usart descriptor.">HAL_UsartDescriptor_t</a> *descriptor);
<a name="l00245"></a>00245 
<a name="l00246"></a>00246 <span class="comment">/**************************************************************************/</span>
<a name="l00258"></a>00258 <span class="keywordtype">int</span> <a class="code" href="usart_8h.html#a845c7db0e70b64ae703ea0b910c0ec60" title="Reads DTR pin state. Only USART_CHANNEL_1 can be used for hardware flow control for avr...">HAL_ReadUsartDtr</a>(<a class="code" href="struct_h_a_l___usart_descriptor__t.html" title="Usart descriptor.">HAL_UsartDescriptor_t</a> *descriptor);
<a name="l00259"></a>00259 
<a name="l00260"></a>00260 <span class="comment">/**************************************************************************/</span>
<a name="l00271"></a>00271 <span class="keywordtype">int</span> <a class="code" href="usart_8h.html#a2d770f76276c1086a98b14a1e4aa2e62" title="Checks the status of tx buffer.">HAL_IsTxEmpty</a>(<a class="code" href="struct_h_a_l___usart_descriptor__t.html" title="Usart descriptor.">HAL_UsartDescriptor_t</a> *descriptor);
<a name="l00272"></a>00272 
<a name="l00273"></a>00273 <span class="preprocessor">#if defined(ATMEGA1281) || defined(ATMEGA2561) || defined(ATMEGA1284) || defined(AT90USB1287) || defined(ATMEGA128RFA1)</span>
<a name="l00274"></a>00274 <span class="preprocessor"></span><span class="comment">/**************************************************************************/</span>
<a name="l00280"></a>00280 <span class="keywordtype">void</span> <a class="code" href="usart_8h.html#ad3cc7eb88d973b65d1dbbc95045ed87c" title="Enables DTR wake up.">HAL_EnableDtrWakeUp</a>(<span class="keywordtype">void</span> (* callback)(<span class="keywordtype">void</span>));
<a name="l00281"></a>00281 
<a name="l00282"></a>00282 <span class="comment">/**************************************************************************/</span>
<a name="l00285"></a>00285 <span class="keywordtype">void</span> <a class="code" href="usart_8h.html#ae2161240a9c651f9d64c5c7e5278a723" title="Disables DTR wake up.">HAL_DisableDtrWakeUp</a>(<span class="keywordtype">void</span>);
<a name="l00286"></a>00286 <span class="preprocessor">#endif</span>
<a name="l00287"></a>00287 <span class="preprocessor"></span>
<a name="l00288"></a>00288 <span class="preprocessor">#endif </span><span class="comment">/* _USART_H */</span>
<a name="l00289"></a>00289 <span class="comment">// eof usart.h</span>
</pre></div></div>
</div>
<img src="footer.png" style="margin-top:20px"/>
</body>
</html>
